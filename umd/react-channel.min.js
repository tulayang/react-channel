!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React")):"function"==typeof define&&define.amd?define(["React"],e):"object"==typeof exports?exports.ReactChannel=e(require("React")):t.ReactChannel=e(t.React)}("undefined"!=typeof self?self:this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),i=r(2);e.Publisher=i.Publisher,e.Subscriber=i.Subscriber,e.Channel=i.Channel;var s=function(t){function e(e){var r=t.call(this,e)||this;return r.publisher=new i.Publisher,r.subscriber=new i.Subscriber,r.publisher.attach(r.props.channel),r.subscriber.attach(r.props.channel),r}return n(e,t),e.prototype.componentWillReceiveProps=function(t){t.channel!==this.props.channel&&(this.publisher.detachAll(),this.subscriber.detachAll(),this.publisher.attach(t.channel),this.subscriber.attach(t.channel))},e.prototype.componentWillUnmount=function(){this.publisher.detachAll(),this.subscriber.detachAll()},e}(o.Component);e.ActionComponent=s;var a=function(){function t(t){this.publisher=new i.Publisher,this.subscriber=new i.Subscriber,this.publisher.attach(t),this.subscriber.attach(t)}return t.prototype.close=function(){this.publisher.detachAll(),this.subscriber.detachAll()},t}();e.ActionStore=a},function(e,r){e.exports=t},function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(s=2&r[0]?i.return:r[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,r[1])).done)return s;switch(i=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(s=c.trys,!(s=s.length>0&&s[s.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){c.label=r[1];break}if(6===r[0]&&c.label<s[1]){c.label=s[1],s=r;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(r);break}s[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(t){r=[6,t],i=0}finally{o=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return s},s=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(){this.channels=new Set}return t.prototype.add=function(t){this.channels.add(t)},t.prototype.del=function(t){this.channels.delete(t)},t.prototype.replace=function(t,e){this.channels.has(t)&&this.channels.delete(t),this.channels.add(e)},t.prototype.has=function(t){return this.channels.has(t)},t.prototype.items=function(){var t,e,r,i,s,a;return n(this,function(n){switch(n.label){case 0:n.trys.push([0,5,6,7]),r=o(this.channels),i=r.next(),n.label=1;case 1:return i.done?[3,4]:(s=i.value,[4,s]);case 2:n.sent(),n.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return a=n.sent(),t={error:a},[3,7];case 6:try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}return[7];case 7:return[2]}})},t.prototype.pub=function(t,e,r){var n,i;try{for(var s=o(this.channels),a=s.next();!a.done;a=s.next()){a.value.pub(t,e,r)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.attach=function(t){t.attachPublisher(this)},t.prototype.detach=function(t){t.detachPublisher(this)},t.prototype.detachAll=function(){var t,e;try{for(var r=o(this.channels),n=r.next();!n.done;n=r.next()){n.value.detachPublisher(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t}();e.Publisher=a;var c=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.publishers=new Set,this.subscribers=new Set,this.topicFilter=null,t.length>0&&(this.topicFilter=s(t))}return t.prototype.attachPublisher=function(t){this.publishers.add(t),t.add(this)},t.prototype.detachPublisher=function(t){t.del(this),this.publishers.delete(t)},t.prototype.detachAllPublisher=function(){var t,e;try{for(var r=o(this.publishers),n=r.next();!n.done;n=r.next()){n.value.del(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.publishers.clear()},t.prototype.attachSubscriber=function(t){this.subscribers.add(t),t.add(this)},t.prototype.detachSubscriber=function(t){t.del(this),this.subscribers.delete(t)},t.prototype.detachAllSubscriber=function(){var t,e;try{for(var r=o(this.subscribers),n=r.next();!n.done;n=r.next()){n.value.del(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.subscribers.clear()},t.prototype.pub=function(t,e,r){var n,i,s,a;try{for(var c=o(this.subscribers),l=c.next();!l.done;l=c.next()){var u=l.value;if(null!==this.topicFilter)try{for(var h=o(this.topicFilter),f=h.next();!f.done;f=h.next()){if(t===f.value)return void u.notify(t,e,r)}}catch(t){s={error:t}}finally{try{f&&!f.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}else u.notify(t,e,r)}}catch(t){n={error:t}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}},t}();e.Channel=c;var l=function(){function t(){this.channels=new Set,this.cbs=new Map}return t.prototype.add=function(t){this.channels.add(t)},t.prototype.del=function(t){this.channels.delete(t)},t.prototype.replace=function(t,e){this.channels.has(t)&&this.channels.delete(t),this.channels.add(e)},t.prototype.has=function(t){return this.channels.has(t)},t.prototype.items=function(){var t,e,r,i,s,a;return n(this,function(n){switch(n.label){case 0:n.trys.push([0,5,6,7]),r=o(this.channels),i=r.next(),n.label=1;case 1:return i.done?[3,4]:(s=i.value,[4,s]);case 2:n.sent(),n.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return a=n.sent(),t={error:a},[3,7];case 6:try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}return[7];case 7:return[2]}})},t.prototype.notify=function(t,e,r){var n,i,s=this.cbs.get(t);if(s instanceof Array)try{for(var a=o(s),c=a.next();!c.done;c=a.next()){(0,c.value)(e,r)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}},t.prototype.sub=function(t,e){var r=this.cbs.get(t);r instanceof Array||(r=[],this.cbs.set(t,r)),r.push(e)},t.prototype.unsub=function(t){this.cbs.delete(t)},t.prototype.unsubAll=function(){this.cbs.clear()},t.prototype.attach=function(t){t.attachSubscriber(this)},t.prototype.detach=function(t){t.detachSubscriber(this)},t.prototype.detachAll=function(){var t,e;try{for(var r=o(this.channels),n=r.next();!n.done;n=r.next()){n.value.detachSubscriber(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t}();e.Subscriber=l}])});