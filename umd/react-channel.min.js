!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("React")):"function"==typeof define&&define.amd?define(["React"],e):"object"==typeof exports?exports.ReactChannel=e(require("React")):t.ReactChannel=e(t.React)}("undefined"!=typeof self?self:this,function(t){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),i=r(2);e.Publisher=i.Publisher,e.Subscriber=i.Subscriber,e.Channel=i.Channel;var a=function(t){function e(e){var r=t.call(this,e)||this;return r.publisher=new i.Publisher,r.subscriber=new i.Subscriber,"function"==typeof r.props.pub&&r.props.pub(r.publisher),"function"==typeof r.props.sub&&r.props.sub(r.subscriber),r}return n(e,t),e.prototype.componentWillUnmount=function(){this.publisher.detachAll(),this.subscriber.detachAll()},e}(o.Component);e.ActionComponent=a},function(e,r){e.exports=t},function(t,e,r){"use strict";var n=this&&this.__generator||function(t,e){function r(t){return function(e){return n([t,e])}}function n(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,i=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(a=c.trys,!(a=a.length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){c.label=r[1];break}if(6===r[0]&&c.label<a[1]){c.label=a[1],a=r;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(r);break}a[2]&&c.ops.pop(),c.trys.pop();continue}r=e.call(t,c)}catch(t){r=[6,t],i=0}finally{o=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}var o,i,a,s,c={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},o=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],r=0;return e?e.call(t):{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}}},i=this&&this.__read||function(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(t){o={error:t}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a},a=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t};Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(){this.channels=new Set}return t.prototype.add=function(t){this.channels.add(t)},t.prototype.del=function(t){this.channels.delete(t)},t.prototype.replace=function(t,e){this.channels.has(t)&&this.channels.delete(t),this.channels.add(e)},t.prototype.has=function(t){return this.channels.has(t)},t.prototype.items=function(){var t,e,r,i,a,s;return n(this,function(n){switch(n.label){case 0:n.trys.push([0,5,6,7]),r=o(this.channels),i=r.next(),n.label=1;case 1:return i.done?[3,4]:(a=i.value,[4,a]);case 2:n.sent(),n.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=n.sent(),t={error:s},[3,7];case 6:try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}return[7];case 7:return[2]}})},t.prototype.pub=function(t){var e,r;try{for(var n=o(this.channels),i=n.next();!i.done;i=n.next()){i.value.pub(t)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.attach=function(t){t.attachPublisher(this)},t.prototype.detach=function(t){t.detachPublisher(this)},t.prototype.detachAll=function(){var t,e;try{for(var r=o(this.channels),n=r.next();!n.done;n=r.next()){n.value.detachPublisher(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t}();e.Publisher=s;var c=function(){function t(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];this.publishers=new Set,this.subscribers=new Set,this.actionFilter=[],(t=this.actionFilter).push.apply(t,a(e))}return t.prototype.attachPublisher=function(t){this.publishers.add(t),t.add(this)},t.prototype.detachPublisher=function(t){t.del(this),this.publishers.delete(t)},t.prototype.detachAllPublisher=function(){var t,e;try{for(var r=o(this.publishers),n=r.next();!n.done;n=r.next()){n.value.del(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.publishers.clear()},t.prototype.attachSubscriber=function(t){this.subscribers.add(t),t.add(this)},t.prototype.detachSubscriber=function(t){t.del(this),this.subscribers.delete(t)},t.prototype.detachAllSubscriber=function(){var t,e;try{for(var r=o(this.subscribers),n=r.next();!n.done;n=r.next()){n.value.del(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}this.subscribers.clear()},t.prototype.pub=function(t){var e,r,n,i;try{for(var a=o(this.subscribers),s=a.next();!s.done;s=a.next()){var c=s.value;if(this.actionFilter.length>0)try{for(var l=o(this.actionFilter),u=l.next();!u.done;u=l.next()){var h=u.value;if(t.action===h)return void c.notify(t)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}else c.notify(t)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}},t}();e.Channel=c;var l=function(){function t(){this.channels=new Set,this.cbs=[]}return t.prototype.add=function(t){this.channels.add(t)},t.prototype.del=function(t){this.channels.delete(t)},t.prototype.replace=function(t,e){this.channels.has(t)&&this.channels.delete(t),this.channels.add(e)},t.prototype.has=function(t){return this.channels.has(t)},t.prototype.items=function(){var t,e,r,i,a,s;return n(this,function(n){switch(n.label){case 0:n.trys.push([0,5,6,7]),r=o(this.channels),i=r.next(),n.label=1;case 1:return i.done?[3,4]:(a=i.value,[4,a]);case 2:n.sent(),n.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=n.sent(),t={error:s},[3,7];case 6:try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}return[7];case 7:return[2]}})},t.prototype.notify=function(t){var e,r;try{for(var n=o(this.cbs),i=n.next();!i.done;i=n.next()){(0,i.value)(t)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.sub=function(t){this.cbs.push(t)},t.prototype.attach=function(t){t.attachSubscriber(this)},t.prototype.detach=function(t){t.detachSubscriber(this)},t.prototype.detachAll=function(){var t,e;try{for(var r=o(this.channels),n=r.next();!n.done;n=r.next()){n.value.detachSubscriber(this)}}catch(e){t={error:e}}finally{try{n&&!n.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}},t}();e.Subscriber=l}])});